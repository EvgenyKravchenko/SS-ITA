{"ts":1359152496356,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"window.onload = function () {\n  refresh_time();\n  document.getElementById(\"container\").addEventListener(\"contextmenu\", context_handler, false);\n  document.getElementById(\"container\").addEventListener(\"mousedown\", down_handler, false);\n  document.getElementById(\"container\").addEventListener(\"mousemove\", move_handler, false);\n\n\n  document.oncontextmenu = function() { return false }\n  document.onselectstart = function() { return false }\n  document.onmouseup = up_handler;\n}\n\n\n/*\n* time_mode = 0 - Format time 11:40\n* time_mode = 1 - Format time 11:40:00\n*\n* date_time_mode = 0 - time\n* date_time_mode = 1 - date\n* */\n\nvar time_mode = 1;\nvar date_time_mode = 0;\nvar drag = 0;\nvar x, y, x_old, y_old;\nvar startx, starty;\n\nfunction refresh_time() {\n  var date = new Date();\n\n  var hours = date.getHours();\n  var minutes = date.getMinutes();\n  var seconds = date.getSeconds();\n  var current_time;\n\n  hours = checked_value(hours);\n  minutes = checked_value(minutes);\n\n  current_time = hours + \":\" + minutes;\n\n  if (time_mode) {\n    seconds = checked_value(seconds);\n    current_time = current_time + \":\" + seconds;\n  }\n\n  document.getElementById(\"container\").innerHTML = current_time;\n  setTimeout(refresh_date_time, 1000);\n}\n\nfunction refresh_date(){\n  var date = new Date();\n\n  var day = date.getDate();\n  var month = date.getMonth() + 1;\n  var year = date.getFullYear();\n\n  day = checked_value(day);\n  month = checked_value(month);\n\n  document.getElementById(\"container\").innerHTML = day + \".\" + month + \".\" + year;\n  setTimeout(refresh_date_time, 1000*60);\n\n}\n\n\n\nfunction refresh_date_time(){\n  switch (date_time_mode) {\n    case 0: refresh_time(); break;\n    case 1: refresh_date(); break;\n  }\n}\n\nfunction context_handler() {\n  date_time_mode = (date_time_mode)? 0 : 1;\n  refresh_date_time()\n}\n\nfunction down_handler(){\n  var event = event || window.event;\n  var element = document.getElementById(\"container\");\n  if (check_button(event) === \"left\") {\n    x_old = define_position(event).x;\n    y_old = define_position(event).y;\n    x = absolute_position(element).x;\n    y = absolute_position(element).y;\n\n    startx = x_old;\n    starty = y_old;\n  }\n\n}\n\n\nfunction move_handler(event){\n  var element = document.getElementById(\"container\");\n\n  var x_move = define_position(event).x;\n  var y_move = define_position(event).y;\n  if (startx && starty){\n    if ((startx !== x_move) || (starty !== y_move)){\n      drag = 1;\n    }\n  }\n\n  if (drag) {\n      element.style.left = x + define_position(event).x - x_old + \"px\";\n      element.style.top = y + define_position(event).y - y_old + \"px\";\n  }\n\n\n}\n\nfunction absolute_position(object){\n  var x = 0;\n  var y = 0;\n\n  while(object) {\n    x += object.offsetLeft;\n    y += object.offsetTop;\n    object = object.offsetParent;\n  }\n  return {x:x, y:y};\n}\n\n\nfunction define_position(event) {\n  var x = 0;\n  var y = 0;\n\n  if (document.attachEvent) {\n    x = window.event.clientX + document.documentElement.scrollLeft + document.body.scrollLeft;\n    y = window.event.clientY + document.documentElement.scrollTop + document.body.scrollTop;\n  }\n  if (!document.attachEvent && document.addEventListener) {\n    x = event.clientX + window.scrollX;\n    y = event.clientY + window.scrollY;\n  }\n  return {x:x, y:y};\n}\n\n\nfunction up_handler(){\n  drag = 0;\n\n  var target = event.target || event.srcElement;\n\n  /* Если просто клик */\n  if (startx === event.clientX && starty === event.clientY){\n   time_mode = (target.innerHTML.length === 5)? 1 : 0;\n   refresh_date_time();\n  }\n\n\n  startx = null;\n  starty = null;\n  document.onmousemove = null;\n\n}\n\n\nfunction checked_value(value){\n  return value = ((\"\" + value).length < 2) ? \"0\" + value : value;\n}\n\nfunction check_button(event){\n  var button;\n  if (event.which === 1) button = \"left\";\n  else if (event.which === 3) button = \"right\";\n\n  if (!event.which && event.button) {\n    if (event.button & 1) button = \"left\";\n    else if (event.button & 2) button = \"right\";\n  }\n\n  return button;\n}\n\n\n"]],"start1":0,"start2":0,"length1":0,"length2":3961}]],"length":3961}
